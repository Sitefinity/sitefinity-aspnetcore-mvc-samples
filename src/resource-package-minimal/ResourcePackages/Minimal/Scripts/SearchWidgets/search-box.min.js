!function () { function e(e) { if (e && "widgetLoaded" === e.type) { var r = e.detail.element.querySelector("[data-sf-role='search-box']"), n = e.detail.element.querySelector("[data-sf-role='search-button'"); r && t(r, n) } else document.querySelectorAll("[data-sf-role='search-box']").forEach((function (e) { if (e) { var r = e.parentNode.querySelector("[data-sf-role='search-button'"); t(e, r) } })) } function t(e, t) { !function (e, t) { e && (e.addEventListener("keypress", (function (e) { !function (e) { e || (e = window.event); 13 == (e.keyCode || e.charCode) && i(e.target) }(e) })), e.addEventListener("keyup", (function (e) { !function (e) { if (38 != e.keyCode && 40 != e.keyCode && 27 != e.keyCode) { var t = e.target.value.trim(), i = n(e.target); i.minSuggestionLength && t.length >= i.minSuggestionLength ? function (e) { var t = n(e), i = t.servicePath + "/Default.GetSuggestions()?indexName=" + t.catalogue + "&sf_culture=" + t.culture + "&siteId=" + t.siteId + "&scoringInfo=" + t.scoringSetting + "&suggestionFields=" + t.suggestionFields + "&searchQuery=" + e.value; 1 == t.resultsForAllSites ? i += "&resultsForAllSites=True" : 2 == t.resultsForAllSites && (i += "&resultsForAllSites=False"); fetch(i).then((function (e) { e.json().then((function (e) { r.source(e.value) })) })).catch((function () { r.hide() })) }(e.target) : r.hide() } 40 == e.keyCode ? r.focus() : 27 == e.keyCode && r.hide() }(e) }))); t && t.addEventListener("click", (function (t) { i(e) })) }(e, t); var r = function (e) { var t = e.parentNode.parentNode.querySelector("[data-sf-role='search-box-autocomplete']"), r = []; function n() { if (t) for (var e = t.lastElementChild; e;)t.removeChild(e), e = t.lastElementChild } function a(r) { var n = r.keyCode, a = t.querySelector(".dropdown-item.active"); if (a) { var s = a.parentElement.previousElementSibling, u = a.parentElement.nextElementSibling; 38 == n && s ? c(s) : 40 == n && u ? c(u) : 13 == n ? (e.value = currentNode.innerText, i(e), l(), e.focus()) : 27 == n && (o(), l(!1), e.focus()) } } function o() { var e = t.querySelector(".dropdown-item.active"); e && e.classList.remove("active") } function s(t) { var r = t.target.innerText; e.value = r, i(e), l() } function u() { !function () { const r = e.clientWidth; t.style.width = r + "px" }(), t.classList.remove("d-none") } function l(e) { void 0 === e && (e = !0), e && n(), t.style.width = "", t.classList.add("d-none") } function d(e) { t.contains(e.relatedTarget) || l(!1) } function c(e) { o(); var t = e.querySelector(".dropdown-item"); t.classList.add("active"), t.focus() } return e.addEventListener("keyup", (function (e) { 40 == e.keyCode && r.length && (u(), c(r[0])) })), e.addEventListener("focusout", d), t?.addEventListener("focusout", d), t?.addEventListener("keyup", a), t?.addEventListener("click", s), { source: function (e) { e = Array.isArray(e) ? e : [], r = function (e) { var t = []; if (Array.isArray(e) && e.length > 0) for (var r = 0; r < e.length; r++) { var n = document.createElement("LI"); n.setAttribute("role", "option"); var i = document.createElement("BUTTON"); i.setAttribute("role", "presentation"), i.classList.add("dropdown-item", "text-truncate"), i.innerText = e[r], i.title = e[r], i.tabIndex = -1, n.appendChild(i), t.push(n) } return t }(e), n(); for (var i = 0; i < r.length; i++)t.appendChild(r[i]); r.length && u() }, show: u, hide: l, clear: n, focus: function () { t.children.length && t.children[0].querySelector(".dropdown-item").focus() } } }(e); function n(e) { return { resultsUrl: e.getAttribute("data-sf-results-url"), catalogue: e.getAttribute("data-sf-search-catalogue"), scoringSetting: e.getAttribute("data-sf-scoring-setting"), minSuggestionLength: parseInt(e.getAttribute("data-sf-suggestions-length")), siteId: e.getAttribute("data-sf-site-id"), culture: e.getAttribute("data-sf-culture"), suggestionFields: e.getAttribute("data-sf-suggestions-fields"), servicePath: e.getAttribute("data-sf-service-path"), orderBy: e.getAttribute("data-sf-sort"), resultsForAllSites: e.getAttribute("data-sf-results-all") } } function i(e) { window.DataIntelligenceSubmitScript && DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({ predicate: "Search for", object: e.value.trim(), objectMetadata: [{ K: "PageUrl", V: location.href }] }); var t = function (e) { var t = e.value.trim(), r = e.getAttribute("data-sf-results-url"), n = (-1 === r.indexOf("?") ? "?" : "&") + "indexCatalogue=" + e.getAttribute("data-sf-search-catalogue"), i = "&searchQuery=" + t, a = "&wordsMode=AllWords", o = "&sf_culture=" + e.getAttribute("data-sf-culture"), s = r + n + i + a + o, u = e.getAttribute("data-sf-scoring-setting"); u && (s = s + "&scoringInfo=" + u); var l = e.getAttribute("data-sf-sort"); l && (s = s + "&orderBy=" + l); var d = e.getAttribute("data-sf-results-all"); 1 == d ? s += "&resultsForAllSites=True" : 2 == d && (s += "&resultsForAllSites=False"); return s }(e); window.location = t } } document.addEventListener("widgetLoaded", e), document.addEventListener("DOMContentLoaded", e) }();