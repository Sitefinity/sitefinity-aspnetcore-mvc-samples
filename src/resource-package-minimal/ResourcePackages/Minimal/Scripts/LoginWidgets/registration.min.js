document.addEventListener("DOMContentLoaded", function () { var e = document.querySelector('[data-sf-role="sf-registration-container"]'), n = e.querySelector('[data-sf-role="form-container"]'), t = n.querySelector("form"), a = e.querySelector('[data-sf-role="error-message-container"]'), r = e.querySelector('[data-sf-role="success-registration-message-container"]'), i = e.querySelector('[data-sf-role="confirm-registration-message-container"]'); t.addEventListener("submit", function (e) { e.preventDefault(), f(t) && s(t, null, o, l) }); var o = function () { var e = n.querySelector("input[name='PostRegistrationAction']").value, t = n.querySelector("input[name='ActivationMethod']").value; if ("ViewMessage" === e) "AfterConfirmation" == t ? c() : u(); else if ("RedirectToPage" === e) { var a = n.querySelector("input[name='RedirectUrl']").value; p(a) } }, l = function (e, n) { a.innerText = e, S(a) }, u = function () { q(a), q(n), S(r) }, c = function () { q(n), S(i); var e = i.querySelector("input[name='ActivationLinkLabel']").value, a = i.querySelector('[data-sf-role="activation-link-message-container"]'), r = new FormData(t).get("Email"); a.innerText = e + " " + r; var o = i.querySelector('[data-sf-role="sendAgainLink"]'), l = i.querySelector("input[name='ResendConfirmationEmailUrl']").value; o.addEventListener("click", function (e) { e.preventDefault(), s(t, l, d) }) }, s = function (e, n, t, a) { n = n || e.attributes.action.value; var r = { model: v(e) }; window.fetch(n, { method: "POST", body: JSON.stringify(r), headers: { "Content-Type": "application/json" } }).then(e => { var n = e.status; 0 === n || n >= 200 && n < 400 ? t && t() : e.json().then(e => { var t = e.error.message; a && a(t, n) }) }) }, d = function () { var e = i.querySelector('[data-sf-role="activation-link-message-container"]'), n = i.querySelector("input[name='SendAgainLabel']").value, a = new FormData(t).get("Email"); e.innerText = n.replace("{0}", a) }, f = function (e) { var t = !0; if (y(e), q(a), e.querySelectorAll("input[data-sf-role='required']").forEach(function (e) { e.value || (m(e), t = !1) }), !t) return a.innerText = n.querySelector("input[name='ValidationRequiredMessage']").value, S(a), t; var r = e.querySelector("input[name='Email']"); if (!g(r.value)) return a.innerText = n.querySelector("input[name='ValidationInvalidEmailMessage']").value, m(r), S(a), !1; var i = e.querySelectorAll("[type='password']"); return i[0].value !== i[1].value ? (a.innerText = n.querySelector("input[name='ValidationMismatchMessage']").value, m(i[1]), S(a), !1) : t }, v = function (e) { var n = {}, t = new FormData(e); for (var a of t.keys()) n[a] = t.get(a); return n }, m = function (e) { e && e.classList.add("is-invalid") }, y = function (e) { e.querySelectorAll(".is-invalid").forEach(function (e) { e.classList.remove("is-invalid") }) }, S = function (e) { e && (e.classList.add("d-block"), e.classList.remove("d-none")) }, q = function (e) { e && (e.classList.add("d-none"), e.classList.remove("d-block")) }, g = function (e) { return /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w+)+$/.test(e) }, p = function (e) { window.location = e } });